/*------------------------------------------------
【程序设计】
--------------------------------------------------

功能：编写函数fun求1!+2!+3!+ …… +n!的和,在main函
      数中由键盘输入n值，并输出运算结果。请编写fun
      函数。
例如：若n值为5，则结果为153。

------------------------------------------------*/
    
#include<stdio.h>
void wwjt();
 
long int  fun(int n)
{
  
  /**********Program**********/
int i,j;
long t,fun=0;
for(i=1;i<=n;i++)
{
	t=1;
	for(j=1;j<=i;j++)
		t=t*j;
	fun=fun+t;
}
return(fun);
  /**********  End  **********/
/*-------------------------------------------------------
【程序填空】
---------------------------------------------------------

功能：输出100到1000之间的各位数字之和能被15整除的所有数，
      输出时每10个一行。

-------------------------------------------------------*/
#include <stdio.h>
main()
{
  int m,n,k,i=0;
  for(m=100;m<=1000;m++)
  {
    /***********SPACE***********/
    k=0  ;
    n=m;
    do
    {
     /***********SPACE***********/
       k=k+n-n%10*10 ;
       n=n/10;
     }
     /***********SPACE***********/
     while(n>0);
     if (k%15==0)
     {
        printf("%5d",m);i++;
        /***********SPACE***********/
        if(i%10==0) printf("\n");
      }
   }
}
/*------------------------------------------------------        
【程序改错】
--------------------------------------------------------

功能：将若干学生的档案存放在一个文件中，并显示其内容。

------------------------------------------------------*/
#include <stdio.h>
struct student
{
  int num;
  char name[10];
  int age;
};

struct student stu[3]={{001,"Li Mei",18},
                       {002,"Ji Hua",19},
                       {003,"Sun Hao",18}};

#include <stdio.h>

void main()
{
  /**********FOUND**********/
  struct student *p;   
  /**********FOUND**********/
  file *fp;
  int i;
  if((fp=fopen("stu_list","wb"))==NULL)
  {
    printf("cannot open file\n");
    return;
  }
  /**********FOUND**********/
  for(p=stu;p<stu+3;p++)
    fwrite(p,sizeof(struct student),1,fp);
  fclose(fp);
  fp=fopen("stu_list","rb");
  printf(" No.  Name       age\n");
  for(i=1;i<=3;i++)
  {
    fread(p,sizeof(struct student),1,fp);
    /**********FOUND**********/ 
    printf("%4d %-10s %4d\n",(*p).num,p->name,(*p).age);
  }
  fclose(fp);
}
/*-------------------------------------------------------
【程序填空】
---------------------------------------------------------

功能：以下程序的功能如(图1)。

-------------------------------------------------------*/

#include <conio.h>
#include <stdio.h>
/***********SPACE***********/
double fun(float x, int n) 
{ 
  /***********SPACE***********/
     int j;  
  double xa=0, s; 
  for (j=0; j<n; j++ )
    xa += x[j]/n;
  /***********SPACE***********/
     s=0.0;
   for (j=0; j<n; j++ )
     s += (x[j]-xa)*(x[j]-xa)/n;
  /***********SPACE***********/
  return s; 
}
main ( )
{ 
  double x[100] = {193.199, 195.673, 195.757, 196.051, 196.092,196.596,196.579, 196.763};
  printf("%f\n", fun (x, 8));
}
/*-------------------------------------------------------
【程序填空】
---------------------------------------------------------

功能：下面函数为二分法查找key值。数组中元素已递增排序，
      若找到key则返回对应的下标，否则返回-1。

-------------------------------------------------------*/
#include <stdio.h>
fun(int a[],int n,int key)
{
  int low,high,mid;
  low=0;
  high=n-1;
  /***********SPACE***********/
  while(low<=high)
  {
    mid=(low+high)/2;
  if(key<a[mid]) 
    /***********SPACE***********/
    high=mid-1;
  else if(key>a[mid]) 
  /***********SPACE***********/
  low=mid+1;
  else  
    /***********SPACE***********/
    return (mid);
  }
  return -1;
}
main()
{
  int a[10]={1,2,3,4,5,6,7,8,9,10};
  int b,c;
  b=4;
  c=fun(a,10,b);
  if(c==1) 
     printf("not found");
  else 
     printf("position %d\n",c);
}
*------------------------------------------------
【程序设计】
--------------------------------------------------

功能：求出二维数组周边元素之和，作为函数值返回。二
      维数组的值在主函数中赋予。

-------------------------------------------------*/

#define M 4
#define N 5
#include <stdio.h>
void wwjt();
 
int fun(int a[M][N])
{

/**********Program**********/
int i,j,s=0;
      for(i=0;i<M;i++)
      for(j=0;j<N;j++)
if(i==0||i==M-1||j==0||j==N-1)
s+=a[i][j];
return(s);
/**********  End  **********/

}

main()
{
int a[M][N]={{1,3,5,7,9},{2,4,6,8,10},{2,3,4,5,6},{4,5,6,7,8}};
int y;
*-------------------------------------------------------
【程序填空】
---------------------------------------------------------

功能：将一个字符串中下标为m的字符开始的全部字符复制成为另
      一个字符串。

-------------------------------------------------------*/

#include<stdio.h>
void strcopy(char *str1,char *str2,int m)
{ 
   char *p1,*p2; 
   /***********SPACE***********/
   p1=str1+m;  
   p2=str2;
   while(*p1)
   /***********SPACE***********/
   *p2++=*p1++; 
   /***********SPACE***********/
   *p2=0;
}
main()
{
   int m;
   char str1[80],str2[80];
   gets(str1); 
   scanf("%d",&m);
   /***********SPACE***********/
   strcopy(str1,str2,m); 
   puts(str1);puts(str2);
}
/*------------------------------------------------------        
【程序改错】
--------------------------------------------------------

功能：求1到20的阶乘的和。

------------------------------------------------------*/
#include <stdio.h>
fun()
{ 
  int n,j;
  float s=0.0,t=1.0;
  for(n=1;n<=20;n++)
  {        
    /**********FOUND**********/
    t=1;
    for(j=1;j<=n;j++)
      /**********FOUND**********/
      t=t*j;
    /**********FOUND**********/
    s=s+t;
  }
  /**********FOUND**********/
  printf("jiecheng=%f\n",s);
}

main()
{
  fun();
}
*-------------------------------------------------------
【程序填空】
---------------------------------------------------------

功能：以下程序的功能如(图1)。

-------------------------------------------------------*/
 #include <stdio.h> 
/***********SPACE***********/
 #include <math.h> 
main()
{
  double x,f;
  scanf("%f",&x);
  /***********SPACE***********/
  if(x<0) f=fabs(x+1);
  /***********SPACE***********/
  else if(0<=x&&x<=5)
    f=2*x+1;
  else  
    f=sin(x)+5;
  /***********SPACE***********/
  printf("x=%f,y=%f\n",  x,f);
}
/*------------------------------------------------------        
【程序改错】
--------------------------------------------------------

功能：将字符串s中最后一次出现的子字符串t1替换成字符串t2,
      所形成的新串放在w所指的数组中，在此处，要求t1和t2
      所指字符串的长度相同。
例如：当s所指字符串中的内容为"abcdabfabc"，t1中的内容
      为"ab"，t2中的内容为"99"时，结果w所指数组中的内容
      应为"abcdabf99c"。

------------------------------------------------------*/

#include  <conio.h>
#include  <stdio.h>
#include  <string.h>
void  fun (char  *s,  char *t1, char *t2 , char *w)
{
  char   *p , *r, *a;
  strcpy( w, s );
  /**********FOUND**********/
  while ( *w )
  {
    p = w;   r = t1;
    while ( *r )
    /**********FOUND**********/
    if ( *r == *p )  
    {
      r++;  
      p++; 
    }
    else  
      break;
    /**********FOUND**********/
    if ( *r == '\0' ) a = w;
      w++;
  }
  r = t2;
  while ( *r )
  { 
    /**********FOUND**********/
    *a = *r; 
    a++; 
    r++; 
  }
}

main()
{
  char   s[100], t1[100], t2[100], w[100];
  printf("\nPlease enter string S:"); scanf("%s", s);
  printf("\nPlease enter substring t1:"); scanf("%s", t1);
  printf("\nPlease enter substring t2:"); scanf("%s", t2);
  if ( strlen(t1)==strlen(t2) )
  {  
    fun( s, t1, t2, w);
    printf("\nThe result is :  %s\n", w);
  }
  else  
    printf("\nError : strlen(t1) != strlen(t2)\n");
}
/*-------------------------------------------------------
【程序填空】
---------------------------------------------------------

功能：以下程序的功能如(图1)。

-------------------------------------------------------*/
#include <stdio.h>
#include <math.h>
main()
{ 
  int f;
  /***********SPACE***********/
  float n;
  double t,pi;
  t=1;pi=t;f=1;n=1.0;
  /***********SPACE***********/
  while(fabs(t)>=1e-6)
  {
    n=n+2;
    /***********SPACE***********/
    f=-f;
    t=f/n;
    pi=pi+t;
  }
  /***********SPACE***********/
  pi=pi*4;
   printf("pi=%10.6f\n",pi);
}
/*------------------------------------------------------        
【程序改错】
--------------------------------------------------------

功能：实现两个字符串的连接。
例如：输入dfdfqe和12345时，则输出dfdfqe12345.

------------------------------------------------------*/

#include <stdio.h>
main()
{
  char s1[80],s2[80];
  void scat(char s1[],char s2[]);
  gets(s1);
  gets(s2);
  scat(s1,s2);
  puts(s1);
}

void scat (char s1[],char s2[])
{
  int i=0,j=0;
  /**********FOUND**********/
  while(s1[i]!='\0')
    i++;
  /**********FOUND**********/
  while(s2[j]!='\0')
  {
    /**********FOUND**********/
    s1[i]=s2[j];
    i++;
    j++;
  }
  /**********FOUND**********/
  s1[i]='\0';
}
/*-------------------------------------------------------
【程序填空】
---------------------------------------------------------

功能：以下程序的功能如(图1)。

-------------------------------------------------------*/

#include <conio.h>
#include <stdio.h>
/***********SPACE***********/
double fun(float x[], int n) 
{ 
  /***********SPACE***********/
  int j;  
  double xa=0, s; 
  for (j=0; j<n; j++ )
    xa += x[j]/n;
  /***********SPACE***********/
  s=0.0;
   for (j=0; j<n; j++ )
     s += (x[j]-xa)*(x[j]-xa)/n;
  /***********SPACE***********/
  return s; 
}
main ( )
{ 
  double x[100] = {193.199, 195.673, 195.757, 196.051, 196.092,196.596,196.579, 196.763};
  printf("%f\n", fun (x, 8));
}
/*------------------------------------------------------        
【程序改错】
--------------------------------------------------------

功能：求如下表达式：
     
               1       1                     1
      S = 1 + ―― + ――― + ...... + ――――――― 
              1+2    1+2+3             1+2+3+......+n  

------------------------------------------------------*/

#include <stdio.h>
main()
{
  int n;
  double  fun();
  printf("Please input a number:");
  /**********FOUND**********/
  scanf("%d",&n) ;                              
  printf("%10.6f\n",fun(n));
}

/**********FOUND**********/
  double fun(int n)                                   
{
  int i,j,t;
  double s;
  s=0;
/**********FOUND**********/
  for(i=1;i<=n;i++);                            
  {
    t=0;
    for(j=1;j<=i;j++)
      t=t+j;
    /**********FOUND**********/
    s+=1.0/t;
  }                                   
  return s;
}
【程序设计】
--------------------------------------------------

功能：从键盘输入一个大于3的整数，调用函数fun判断
      其是否素数，然后在main函数中输出相应的结论
      信息。
例如：7是素数，8不是素数。请编写fun函数。素数是
      仅能被1和自身整除的数

-------------------------------------------------*/

#include "stdio.h"
    
void main()
{
  int m,flag;
  printf("input an integer:");
  scanf("%d",&m);
  flag=fun(m);
  if(flag)
    printf("%d is a prime.\n",m);
  else
    printf("%d is not a prime.\n",m);
  yzj();
}

int fun(int n)
{
  
  /**********Program**********/
  
  
  
  
  
  
  /**********  End  **********/
}

yzj()
{
  FILE *IN,*OUT;
  int iIN,iOUT,i;
  IN=fopen("5.in","r");
  if(IN==NULL)
  {
    printf("Please Verify The Currernt Dir..It May Be Changed");
  }
  OUT=fopen("5.out","w");
  if(OUT==NULL)
  {
    printf("Please Verify The Current Dir.. It May Be Changed");
  }
  for(i=0;i<10;i++)        
  {        
    fscanf(IN,"%d",&iIN);
    iOUT=fun(iIN);
    fprintf(OUT,"%d\n",iOUT);
  }
  fclose(IN);
  fclose(OUT);
}
答案：----------------------
int i;
int j;
j= 1;
for(i=2;i<n;i++)
{if(n%i==0) j= 0;
}
return j;
----------------------